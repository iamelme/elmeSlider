<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>
<body>
    <div class="slider">
        <div class="slider__inner">
            <div class="slider__item">
                <img src="img/1.jpg" alt="">
            </div>
            <div class="slider__item ">
                <img src="img/2.jpg" alt="">
            </div>
            <div class="slider__item ">
                <img src="img/3.jpg" alt="">
            </div>
            <div class="slider__item">
                <img src="img/4.jpg" alt="">
            </div>
        </div>

        <button class="nav prev">Prev</button>
        <button class="nav next">Next</button>
    </div>

    <script>
        'use strict';

        let sliderContainer = document.querySelector('.slider__inner'),
            slides = document.querySelectorAll('.slider__item'),
            navBtn = document.querySelectorAll('.nav'),
            widthContainer = 0,
            slidesArrCoorX = [0];

            slides.forEach(e => {
                widthContainer += e.offsetWidth;
              
            });

            sliderContainer.style.width = `${widthContainer}px`; // initial width

            let currentIdx;

            slides.forEach((e, idx) => {
                if(e.className.indexOf('current') !== -1) {
                    currentIdx = idx;
                }
                if(idx < slides.length - 1) {
                    slidesArrCoorX.push(e.getBoundingClientRect().x);
                }
            });

            slides[0].classList.add('current');
            console.log(currentIdx +' <--- index outside');


            let coordX;

            console.log(slidesArrCoorX);

            function coords() {
                console.log(slidesArrCoorX);
                
                slides.forEach((e, idx) => {
                    if(e.className.indexOf('current') !== -1) {
                        e.classList.remove('current');
                        currentIdx = idx;
                    }
                });

               
                console.log(currentIdx +' <--- index');
               
                console.log(slidesArrCoorX[currentIdx]);


                if(this.className.indexOf('next') !== -1){
                    coordX = slidesArrCoorX[currentIdx + 1];
                    if(currentIdx < slides.length -1) {
                        slides[currentIdx + 1].classList.add('current');                        
                    } else {
                        slides[0].classList.add('current');
                        sliderContainer.style.transform = `translateX(-0px)`;
                        console.log('dre')
                    }
                } else {
                    console.log('prev click');

                    console.log(currentIdx + 'index UPPER');

                    if(currentIdx == 0) {
                        slides[slides.length -1].classList.add('current');
                        currentIdx = slides.length -1;

                        console.log(currentIdx    + ' current prev ');
                        coordX = slidesArrCoorX[currentIdx];

                        currentIdx = currentIdx -1;
                    }
                    else {
                        slides[currentIdx - 1].classList.add('current');
      
                        coordX = slidesArrCoorX[currentIdx -1];
                        
                        console.log(currentIdx - 1 + ' aw     ');                
                    }   

                    console.log(currentIdx + 'gawas sa if index')
                }

                

                
                sliderContainer.style.transform = `translateX(-${ coordX }px)`;

            }

            navBtn.forEach(e=>e.addEventListener('click', coords));
            

    </script>
</body>
</html>